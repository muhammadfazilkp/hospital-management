(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7637,776],{77179:function(e,n,t){var r=t(18361);e.exports=function(e){return r(e,5)}},7031:function(e,n,t){"use strict";t.d(n,{o:function(){return s}});t(29901);var r=t(46019),o=t(38889),i=t(7078),a=t(61250),s=function(e){var n=e.children,t=e.contentWrapperCssClasses,s=void 0===t?"flex-grow overflow-hidden":t,l=e.headerControl,u=e.headerWrapperCssClasses,c=void 0===u?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":u,d=(0,r.useRecoilValue)(o.qx);return(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[l&&(0,a.jsx)("div",{className:c,children:l}),d?(0,a.jsx)(i.a,{size:"lg"}):(0,a.jsx)("div",{className:s,children:n})]})}},87757:function(e,n,t){"use strict";t.d(n,{s:function(){return l}});var r=t(89303),o=(t(29901),t(46019)),i=t(40810),a=t(65992),s=t(61250),l=function(){var e=(0,o.useRecoilState)(i.Hw),n=(0,r.Z)(e,2),t=n[0],l=n[1];return(0,s.jsx)(a.n,{icon:"bounding-box",title:"Bounding box",onClick:function(){l(!t)},iconColorClass:t?"text-teal-300":"text-gray-600"})}},41169:function(e,n,t){"use strict";t.d(n,{a:function(){return o}});var r=t(78170),o=function(e){var n=e.scopes,t=function(){return n.includes(r.GN.FULL_ACCESS)},o=function(){return t()||n.includes(r.GN.DOWNLOAD)};return{canView:function(){return t()||o()||n.includes(r.GN.VIEW)},canFullAccess:t,canDownload:o}}},17406:function(e,n,t){"use strict";t.r(n);var r=t(77916),o=t(89303),i=t(55312),a=t(24642),s=t.n(a),l=t(59715),u=t(50136),c=t(68668),d=t(62295),f=t(83849),p=t.n(f),m=t(79120),v=t(77179),b=t.n(v),h=t(96928),x=t(58265),w=t(27722),g=t(29901),O=t(34742),C=t(46019),j=t(81638),y=t(4345),E=t(3325),k=t(7031),S=t(87757),I=t(57273),N=t(7092),M=t(53620),P=t(65992),F=t(83771),L=t(80680),T=t(44424),R=t(41169),_=t(30259),A=t(733),U=t(48550),D=t(49046),q=t(76277),Z=t(51702),G=t(36088),B=t(70568),V=t(30424),W=t(77453),K=t(98637),z=t(40810),Q=t(51705),H=t(38889),J=t(5534),Y=t(12670),X=t(16824),$=t(84717),ee=t(61250);function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var re=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(5731),t.e(4079),t.e(5112)]).then(t.bind(t,5112)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[5112]},modules:["animation/[id].tsx -> @/components/features/onboarding/onboarding-modal"]}}),oe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(4340).then(t.bind(t,74340)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74340]},modules:["animation/[id].tsx -> @/components/features/upload/editor-handback-container"]}}),ie=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4868),t.e(6093),t.e(9067)]).then(t.bind(t,6312)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[6312]},modules:["animation/[id].tsx -> @/components/features/palette-swapper/color-palette-confirmation-modal"]}}),ae=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(7426).then(t.bind(t,87426)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[87426]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-export-panel"]}}),se=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4571),t.e(5668)]).then(t.bind(t,75668)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[75668]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-qr-code"]}}),le=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(467),t.e(2846)]).then(t.bind(t,42846)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[42846]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-embed"]}}),ue=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(465).then(t.bind(t,20465)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[20465]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-versions"]}}),ce=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(726),t.e(6627),t.e(4588),t.e(5313),t.e(8024),t.e(2498),t.e(1957),t.e(8327),t.e(1586),t.e(6945)]).then(t.bind(t,76945)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[76945]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-segment-container"]}}),de=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(726),t.e(6627),t.e(4588),t.e(5313),t.e(8024),t.e(2498),t.e(8327),t.e(1586),t.e(7024)]).then(t.bind(t,13683)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[13683]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-panel"]}}),fe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7713),t.e(4868),t.e(5027),t.e(7380)]).then(t.bind(t,67380)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[67380]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-color-palettes"]}}),pe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(243),t.e(8837),t.e(5731),t.e(4079),t.e(5313),t.e(4868),t.e(4270),t.e(5627),t.e(9455),t.e(6313),t.e(981),t.e(1493)]).then(t.bind(t,11493)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[11493]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-file-info"]}}),me=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then(t.bind(t,69896)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[69896]},modules:["animation/[id].tsx -> @/components/page/animation/comment/comment-pushover"]}}),ve=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(2049).then(t.bind(t,32049)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[32049]},modules:["animation/[id].tsx -> @/components/page/animation/background-color-control"]}}),be=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(726),t.e(6627),t.e(4588),t.e(5313),t.e(2498),t.e(8327)]).then(t.bind(t,18327)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[18327]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-preview"]}}),he=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(726),t.e(6627),t.e(5313),t.e(763),t.e(494)]).then(t.bind(t,10763)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10763]},modules:["animation/[id].tsx -> @/components/page/animation/player/animation-player"]}}),xe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(5731),t.e(4079),t.e(467),t.e(5313),t.e(9983),t.e(4372),t.e(4571),t.e(6392),t.e(869),t.e(4844),t.e(6887),t.e(713),t.e(8212)]).then(t.bind(t,22809)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[22809]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-header"]}}),we=function(){var e,n,t,i,a,s,f,v,x,E,ne,we,ge,Oe,Ce,je=(0,g.useState)(),ye=je[0],Ee=je[1],ke=(0,C.useRecoilState)(z.sI),Se=(0,o.Z)(ke,2),Ie=Se[0],Ne=Se[1],Me=(0,g.useState)(),Pe=Me[0],Fe=Me[1],Le=(0,g.useState)(),Te=Le[0],Re=Le[1],_e=(0,C.useSetRecoilState)(H.E4),Ae=(0,C.useSetRecoilState)(z.GG),Ue=(0,g.useState)(null),De=Ue[0],qe=Ue[1],Ze=(0,g.useState)(null),Ge=Ze[0],Be=Ze[1],Ve=(0,g.useState)(!1),We=Ve[0],Ke=Ve[1],ze=(0,C.useResetRecoilState)(z.h3),Qe=(0,C.useResetRecoilState)(z.m9),He=(0,C.useResetRecoilState)(z.lS),Je=(0,C.useSetRecoilState)(J.QJ),Ye=(0,g.useState)(!1),Xe=Ye[0],$e=Ye[1],en=(0,g.useRef)(!1),nn=(0,g.useRef)(!1),tn=(0,C.useSetRecoilState)(H.qx),rn=(0,g.useRef)(!1),on=(0,F.p)(),an=(0,h.useRouter)(),sn=an.query.sort,ln=(0,Z.k)(),un=ln.canShowOnboarding,cn=ln.start,dn=an.query,fn=dn.comment,pn=dn.handback_id,mn=dn.id,vn=(0,_.a)(),bn=(0,B.cF)(),hn=bn.activeWorkspaceId,xn=bn.setActiveWorkspace,wn=bn.workspaces,gn=(0,l.SS)(d.AD.ENABLE_ANIMATION_NAVIGATION_SHORTCUTS),On=(0,j.aM)({query:V.wP,variables:{id:mn},pause:!mn}),Cn=(0,o.Z)(On,1)[0],jn=(0,j.aM)({query:V.xQ,variables:{id:mn,sort:sn,folderId:null===(e=Cn.data)||void 0===e||null===(n=e.file.folder)||void 0===n?void 0:n.id},pause:!mn||!Cn.data||!gn.on}),yn=(0,o.Z)(jn,1)[0],En=(0,C.useRecoilState)(z.fu),kn=(0,o.Z)(En,2),Sn=kn[0],In=kn[1],Nn=(0,q._)("animation_sidebar_panel_state",{}),Mn=(0,o.Z)(Nn,2),Pn=Mn[0],Fn=Mn[1];(0,D.Z)({key:"k",action:function(){var e;if(!gn.off)if(null!==(e=yn.data)&&void 0!==e&&e.fileAboveAndBelowId.nextAnimation){var n="/animation/".concat(yn.data.fileAboveAndBelowId.nextAnimation);sn&&(n+="?sort=".concat(encodeURIComponent(sn.toString()))),an.push(n),nn.current=!1}else if(!en.current){var t=(0,ee.jsx)("div",{children:"No more animations to go to"});null==on||on.pushCustom(t,1e3,"bg-gray-900","text-white"),en.current=!0}},dependencies:[yn,gn.off],takesPrecedence:!0}),(0,D.Z)({key:"j",action:function(){var e;if(!gn.off)if(null!==(e=yn.data)&&void 0!==e&&e.fileAboveAndBelowId.prevAnimation){var n="/animation/".concat(yn.data.fileAboveAndBelowId.prevAnimation);sn&&(n+="?sort=".concat(encodeURIComponent(sn.toString()))),an.push(n),en.current=!1}else if(!nn.current){var t=(0,ee.jsx)("div",{children:"No more animations to go to"});null==on||on.pushCustom(t,1e3,"bg-gray-900","text-white"),nn.current=!0}},dependencies:[yn,gn.off],takesPrecedence:!0}),(0,g.useEffect)((function(){if(yn.data&&yn.data.fileAboveAndBelowId.nextAnimation&&!rn.current&&gn.on){var e,n="next-prev-toast-".concat(null===(e=vn.user)||void 0===e?void 0:e.id),t=localStorage.getItem(n),r=(new Date).getTime();if(!t||r-parseInt(t,10)>12096e5){localStorage.setItem(n,r.toString());var o=(0,ee.jsxs)("div",{children:["Use the ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==on||on.pushCustom(o,3e3,"bg-gray-900","text-white")}rn.current=!0}}),[on,gn.on,null===(t=vn.user)||void 0===t?void 0:t.id,yn.data]),(0,g.useEffect)((function(){if(Cn.data){var e,n,t,r=null===(e=Cn.data.file.folder)||void 0===e?void 0:e.id,o=null===(n=Cn.data.file.folder)||void 0===n?void 0:n.name,i=Cn.data.file.project.id,a=Cn.data.file.project.title,s=null!==(t=Cn.data.file.project.isPrivate)&&void 0!==t&&t,l=Cn.data.file.project.workspaceId,u=wn.some((function(e){var n;return e.id===(null===(n=Cn.data)||void 0===n?void 0:n.file.project.workspaceId)}));l&&u&&l!==hn&&xn(l,!1),Je({type:r?"folder":"project",name:r?o:a,folderId:r,folderName:o,projectId:i,projectTitle:a,isPrivate:s,workspaceId:l})}}),[Cn.data,Je,hn,xn,wn]);var Ln=(0,g.useState)("#f8fafc"),Tn=Ln[0],Rn=Ln[1],_n=(0,C.useRecoilState)(z.h3),An=(0,o.Z)(_n,1)[0],Un=(0,g.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null}),Dn=Un[0],qn=Un[1];(0,g.useEffect)((function(){return ze(),Qe(),Cn.fetching&&tn(!0),Cn.fetching||(tn(!1),In((function(e){if(null===e){var n;if(Pn&&null!==(n=vn.user)&&void 0!==n&&n.id&&Pn[vn.user.id]){var t=Pn[vn.user.id];return t===Y.s.LOTTIE_MOCKUP?Y.s.SEGMENT_MOCKUP:t}return Y.s.DOWNLOAD}return e}))),function(){In(null)}}),[ze,Qe,In,Cn]),(0,g.useEffect)((function(){var e;null!=vn&&null!==(e=vn.user)&&void 0!==e&&e.id&&null!==Sn&&Fn((function(e){var n,t;return null!=vn&&null!==(n=vn.user)&&void 0!==n&&n.id?te(te({},e),{},(0,r.Z)({},null==vn||null===(t=vn.user)||void 0===t?void 0:t.id,Sn)):e}))}),[Sn,null==vn||null===(i=vn.user)||void 0===i?void 0:i.id]);var Zn=(0,g.useCallback)((function(e){try{void 0!==(0,m.H3)(e)&&Rn(e)}catch(e){Rn("#f8fafc")}}),[]);(0,g.useEffect)((function(){var e;if(null!=An&&An.fileObject){Ee(An.fileObject.url),Fe(An.fileObject.metadata),Re(An.fileObject.attributes),Be(An.fileObject),Zn(An.backgroundColor);var n=An.fileObject.url,t=n.substring(n.lastIndexOf("/")+1,n.indexOf("?")).split(".").pop();Ae("lottie"===t)}else if(Cn.data&&!Cn.fetching){var r;Ee(Cn.data.file.fileObject.url),Ne(Cn.data.file),_e({type:"project",id:Cn.data.file.project.id}),Fe(Cn.data.file.fileObject.metadata),Re(Cn.data.file.fileObject.attributes),Be(Cn.data.file.fileObject),qn({id:Cn.data.file.id,showDescOnCollection:Cn.data.file.showDescOnCollection,description:Cn.data.file.description,descriptionUpdatedAt:null===(r=Cn.data.file)||void 0===r?void 0:r.descriptionUpdatedAt,descriptionModifiedBy:Cn.data.file.descriptionModifiedBy}),Zn(Cn.data.file.backgroundColor);var o=Cn.data.file.fileObject.url,i=o.substring(o.lastIndexOf("/")+1,o.indexOf("?")).split(".").pop();Ae("lottie"===i)}else if(Cn.error)throw Cn.error.toString().includes("Access denied")?new y.J:new Error(Cn.error.message);if(null!==(e=Cn.data)&&void 0!==e&&e.file.upgradeRequired)throw new T.K}),[Cn,An,Ae,Ne,_e,Zn]),(0,g.useEffect)((function(){var e;null!==(e=Cn.data)&&void 0!==e&&e.file.id&&(0,c.Z9)(new c.Aj({fileId:Cn.data.file.id,projectId:Cn.data.file.project.id,workspaceId:Cn.data.file.project.workspaceId}))}),[null===(a=Cn.data)||void 0===a?void 0:a.file.id,null===(s=Cn.data)||void 0===s?void 0:s.file.project.id,null===(f=Cn.data)||void 0===f?void 0:f.file.project.workspaceId]);var Gn=(0,g.useState)(!1),Bn=Gn[0],Vn=Gn[1],Wn=(0,g.useState)(!1),Kn=Wn[0],zn=Wn[1],Qn=(0,O.r)(),Hn=(0,R.a)({scopes:(null==Ie?void 0:Ie.animationPermissionScopes)||[]}),Jn=Hn.canDownload,Yn=Hn.canFullAccess,Xn=Hn.canView,$n=(0,C.useRecoilState)(Q.vQ),et=(0,o.Z)($n,2)[1],nt=(0,g.useCallback)((function(){an.query.comment&&(delete an.query.comment,an.push({pathname:an.pathname,query:an.query},void 0,{shallow:!0}))}),[an]),tt=(0,g.useCallback)((function(){In(Y.s.NONE),$e(!1),Sn===Y.s.COMMENTS&&nt()}),[Sn,In,$e,nt]),rt=(0,g.useCallback)((function(e){return function(){Sn===e?(e===Y.s.FILE_INFO&&et(!1),tt()):(e!==Y.s.FILE_INFO&&et(!1),In(e)),Sn===Y.s.COMMENTS&&nt()}}),[tt,Sn,In,et,nt]);(0,g.useEffect)((function(){fn&&Sn!==Y.s.COMMENTS&&rt(Y.s.COMMENTS)}),[fn,Sn,rt]),(0,D.Z)({key:"c",action:function(){Sn!==Y.s.COMMENTS&&In(Y.s.COMMENTS),Sn===Y.s.COMMENTS&&tt()},dependencies:[tt,Sn,In]});var ot=(0,j.aM)({query:W.g,variables:{id:pn},pause:!pn}),it=(0,o.Z)(ot,1)[0];(0,g.useEffect)((function(){Sn!==Y.s.COMMENTS&&an.query.comment&&(rt(Y.s.COMMENTS)(),an.push({pathname:an.pathname,query:an.query},void 0,{shallow:!0})),an.query.edit_description&&(Sn!==Y.s.FILE_INFO&&rt(Y.s.FILE_INFO)(),$e(!0),delete an.query.edit_description,an.replace({pathname:an.pathname,query:an.query},void 0,{shallow:!0}))}),[Sn,an,rt,Xe]);var at=(0,g.useCallback)((function(){Bn?(Vn(!1),Qn.exit()):(Vn(!0),In(Y.s.NONE),Qn.enter())}),[Qn,Bn,In]),st=(0,g.useCallback)((function(e,n){n===Qn&&Vn(!!e)}),[Qn]);(0,g.useEffect)((function(){cn([L._r,L.T8,L.qO,L.fA,L.rG,L.Mx,L.QT])}),[Ie]);var lt=(0,g.useCallback)((function(){zn(!Kn)}),[Kn,zn]),ut=(0,g.useRef)(null),ct=(0,g.useMemo)((function(){return(null==An?void 0:An.id)||(null==Ie?void 0:Ie.currentVersionId)||""}),[null==An?void 0:An.id,null==Ie?void 0:Ie.currentVersionId]),dt=(0,g.useMemo)((function(){var e,n;return{entityId:ct,entityGroupId:(null==Ie?void 0:Ie.id)||mn,isEnabled:null==An||!An.id||An.id===(null==Ie?void 0:Ie.currentVersionId),workspaceId:(null==Ie||null===(e=Ie.project)||void 0===e||null===(n=e.workspace)||void 0===n?void 0:n.id)||""}}),[ct,null==An?void 0:An.id,null==Ie?void 0:Ie.currentVersionId,null==Ie?void 0:Ie.id,null==Ie||null===(v=Ie.project)||void 0===v||null===(x=v.workspace)||void 0===x?void 0:x.id,mn]),ft=(0,A.X0)(dt),pt=(0,A.us)(dt),mt=(0,A.es)(dt),vt=(0,A.VP)(dt),bt=(0,A.UR)(dt),ht=(0,A.OL)(dt),xt=(0,A._i)(dt),wt=(0,U.M)({entityId:Sn===Y.s.COMMENTS?ct:"",entityType:X.TY.FileVersion}),gt=wt.canFetchMoreComments,Ot=wt.commentsQuery,Ct=wt.onFetchMoreComments,jt=wt.onShowReplies,yt=wt.parentComment,Et=wt.pushoverMode,kt=(0,g.useMemo)((function(){return(0,m.H3)(Tn||"#f8fafc")<.5}),[Tn]),St=(0,j.aM)({query:K.mT,variables:{id:mn},pause:!mn||Sn!==Y.s.COMMENTS}),It=(0,o.Z)(St,1)[0],Nt=(0,g.useState)(!1),Mt=Nt[0],Pt=Nt[1],Ft=(0,g.useCallback)((function(){return Pt(!0)}),[]),Lt=(0,g.useCallback)((function(){return Pt(!1)}),[]);(0,g.useEffect)((function(){Lt()}),[Et,Lt]);var Tt=(0,g.useCallback)((function(e){return function(){Sn!==e&&((0,c.Z9)(new c.lF({location:e})),rt(e)())}}),[Sn,rt]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(w.default,{children:(0,ee.jsx)("title",{children:(null==Ie?void 0:Ie.name)||"Animation"})}),(0,ee.jsxs)(k.o,{headerControl:(0,ee.jsx)(G.s,{features:null==Ie?void 0:Ie.features,children:(0,ee.jsx)(xe,{animation:Ie,animationFetching:Cn.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Ie&&(0,ee.jsx)(G.s,{features:Ie.features,children:(0,ee.jsxs)(O.I,{className:p()({"flex flex-grow":!0}),handle:Qn,onChange:st,children:[(0,ee.jsx)("div",{className:p()({"relative flex flex-grow ":!0,"transparency-grid":Kn}),children:(0,ee.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,ee.jsx)("div",{className:p()({"absolute inset-0 flex flex-grow ":!0,"transparency-grid":Kn}),style:{background:Tn}}),Sn===Y.s.LOTTIE_MOCKUP?(0,ee.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-auto pr-80",children:(0,ee.jsx)(be,{animation:Ie,canEdit:Yn()})}):(0,ee.jsxs)("div",{className:p()("relative flex items-center justify-center w-full h-full overflow-auto",{"pr-80":Sn}),children:[ye&&!De&&(0,ee.jsx)(he,{showComments:!0,canComment:!An,mentionables:null===(E=It.data)||void 0===E?void 0:E.commentMentionableUsers,portalRoot:ut.current,animationUrl:ye,currentDiscussion:yt,currentUserId:null===(ne=vn.user)||void 0===ne?void 0:ne.id,entityId:ct,entityType:X.TY.FileVersion,controls:!Bn,isLight:kt,onDeleteComment:ft,onEditComment:pt,onPostComment:mt,onReplyToComment:vt,onResolveComment:bt,onSelectReaction:ht,onUnresolveComment:xt}),ye&&De&&(0,ee.jsx)(he,{portalRoot:ut.current,animationUrl:b()(De),controls:!Bn,isLight:kt}),!Bn&&(0,ee.jsxs)("div",{className:p()("absolute top-0 bottom-0 flex flex-col pt-8 pr-8 pb-14 ",{"right-0":!Sn,"right-86":Sn}),children:[(0,ee.jsxs)("div",{className:"flex flex-col space-y-2","data-onboarding-id":"anim-panel-btn",children:[Xn()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,ee.jsx)(P.n,{icon:"comment",title:"Comments",shortcut:(0,ee.jsx)(M.z,{keys:["C"]}),onClick:Tt(Y.s.COMMENTS),iconColorClass:Sn===Y.s.COMMENTS?"text-teal-300":"text-gray-600"})}),(0,ee.jsx)(P.n,{icon:"info",title:"Animation information",onClick:Tt(Y.s.FILE_INFO),iconColorClass:Sn===Y.s.FILE_INFO?"text-teal-300":"text-gray-600"}),Yn()&&!An&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,ee.jsx)(P.n,{icon:"color-palette",title:"Color Palette",onClick:Tt(Y.s.COLOR_PALETTES),iconColorClass:Sn===Y.s.COLOR_PALETTES?"text-teal-300":"text-gray-600"})}),!An&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,ee.jsx)(P.n,{icon:"segment-mockup",title:"Segments & Mockups",onClick:Tt(Y.s.SEGMENT_MOCKUP),iconColorClass:Sn===Y.s.SEGMENT_MOCKUP?"text-teal-300":"text-gray-600"})}),Yn()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,ee.jsx)(P.n,{icon:"history",title:"Version History",onClick:Tt(Y.s.VERSIONS),iconColorClass:Sn===Y.s.VERSIONS?"text-teal-300":"text-gray-600"})}),Jn()&&!An&&(0,ee.jsx)(P.n,{icon:"embed",title:"Handoff & Embed",iconColorClass:Sn===Y.s.EMBED?"text-teal-300":"text-gray-600",onClick:Tt(Y.s.EMBED)})]}),(0,ee.jsxs)("div",{className:"flex flex-col mt-auto space-y-2",children:[(0,ee.jsx)(S.s,{}),(0,ee.jsx)(P.n,{icon:"grid",title:"Transparency grid",onClick:lt,iconColorClass:Kn?"text-teal-300":"text-gray-600"}),(0,ee.jsx)(ve,{animationBackgroundColor:Tn,onChange:function(e){Rn(e)},fileId:Ie.id,portalRoot:ut.current}),(0,ee.jsx)(P.n,{icon:"full-screen",title:"Full screen",onClick:at,iconColorClass:Bn?"text-teal-300":"text-gray-600"}),(0,ee.jsx)(I.L,{})]})]})]})]})}),(0,ee.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,ee.jsxs)(u.uT,{show:Boolean(Sn),className:"relative flex flex-col bg-white border-l border-gray-100 w-86",enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Sn!==Y.s.LOTTIE_MOCKUP&&(0,ee.jsx)("div",{className:"absolute right-6 top-6",children:(0,ee.jsx)(N.h,{name:"cross",onClick:tt,small:!0,iconLighter:!0})}),Sn===Y.s.COMMENTS&&(0,ee.jsx)(me,{currentUserId:null===(we=vn.user)||void 0===we?void 0:we.id,discussions:null===(ge=Ot.data)||void 0===ge||null===(Oe=ge.comments)||void 0===Oe?void 0:Oe.edges,isFetchingDiscussions:Ot.fetching,isInputExpanded:Mt,mentionables:null===(Ce=It.data)||void 0===Ce?void 0:Ce.commentMentionableUsers,mode:Et,parentDiscussion:yt,canFetchMoreComments:gt,onCollapseInput:Lt,onFetchMoreComments:Ct,onExpandInput:Ft,onDelete:ft,onEdit:pt,onPost:mt,onReply:vt,onReplyClick:jt,onResolve:bt,onSelectReaction:ht,onUnresolve:xt}),Sn===Y.s.FILE_INFO&&Pe&&(0,ee.jsx)(pe,{fileMetaData:Pe,basicMetadata:Te,fileData:Dn,canEdit:Yn(),isEditing:Boolean(Yn()&&Xe),fileUrl:Ie.fileObject.url}),Sn===Y.s.COLOR_PALETTES&&(0,ee.jsx)(fe,{animationUrl:ye,portalRoot:ut.current,workspaceId:Ie.project.workspaceId,setColorModifiedLottie:qe,setOpenColorPaletteModal:Ke}),Sn===Y.s.LOTTIE_MOCKUP&&(0,ee.jsx)(de,{canEdit:Yn(),animation:Ie,onBackToLottieMockupList:Tt(Y.s.SEGMENT_MOCKUP)}),Sn===Y.s.SEGMENT_MOCKUP&&(0,ee.jsx)(ce,{animation:Ie,showLottieMockup:Tt(Y.s.LOTTIE_MOCKUP)}),Sn===Y.s.VERSIONS&&(0,ee.jsx)(ue,{selectVersionPreview:function(){qe(null),He()},animation:Ie}),Sn===Y.s.EMBED&&(0,ee.jsx)(le,{fileId:Ie.id,currentVersionId:Ie.currentVersionId,workspaceId:Ie.project.workspaceId}),Sn===Y.s.QRCODE&&(0,ee.jsx)(se,{fileUrl:Ie.fileObject.url}),Sn===Y.s.DOWNLOAD&&Te&&(0,ee.jsx)(ae,{animation:Ie,basicMetadata:Te,fileMetaData:Pe})]})}),(0,ee.jsx)("div",{ref:ut})]})}),Ie&&pn&&!it.fetching&&it.data&&(0,ee.jsx)(oe,{animation:Ie,handback:it.data.fileHandback}),We&&De&&Ge&&(0,ee.jsx)(ie,{currentFile:Ge,currentFileId:null==Ie?void 0:Ie.id,lottieAnimation:De,closeCallback:function(){Ke(!1)},animationName:null==Ie?void 0:Ie.name,show:!0})]}),(0,ee.jsx)(re,{illustrationURL:"/images/onboarding-animation.png",show:un($.yM.INTRO_ANIM_SEQUENCE),title:"A fresh new look for animation pages",description:"We’ve redesigned the animation pages from the ground up so you can easily get to the tools you’ll need and enjoy a better overall experience. Check out what we’ve changed!",buttonContent:"Let's go",onClose:function(){return cn([L.p9])}})]})};we.getLayout=function(e){return(0,ee.jsx)(E.B,{collapsed:!0,children:e})},n.default=we},36088:function(e,n,t){"use strict";t.d(n,{s:function(){return s},w:function(){return l}});var r=t(62295),o=t(29901),i=t(61250),a=o.createContext({features:[]}),s=function(e){var n=e.children,t=e.features;return(0,i.jsx)(a.Provider,{value:{features:t},children:n})},l=function(){var e=o.useContext(a).features;return e?new r.UZ(e):new r.UZ([])}},38889:function(e,n,t){"use strict";t.d(n,{E4:function(){return r.E4},rU:function(){return r.rU},qx:function(){return r.qx},NY:function(){return r.NY}});var r=t(57896);t(10078)},78170:function(e,n,t){"use strict";var r,o,i,a,s,l;t.d(n,{GN:function(){return r},Nn:function(){return o},hF:function(){return i},nT:function(){return s},ws:function(){return l},QR:function(){return c},xK:function(){return d},qR:function(){return f}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(r||(r={})),function(e){e.Loop="Loop",e.PlayOnce="PlayOnce"}(o||(o={})),function(e){e.DotLottie="lottie",e.Gif="gif",e.LottieJson="json",e.Mp4="mp4"}(i||(i={})),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(a||(a={})),function(e){e.Approved="Approved",e.InProgress="InProgress",e.NeedsReview="NeedsReview",e.Shipped="Shipped"}(s||(s={})),function(e){e.Completed="Completed",e.Failed="Failed",e.InProgress="InProgress",e.Pending="Pending"}(l||(l={}));var u=function(e){return e.split(".").pop()};function c(e){if(!e.fileObject)return!1;var n=e.fileObject.filename,t=u(n);return void 0!==t&&["lottie","json"].includes(t)}function d(e){if(!e.fileObject)return!1;var n=e.fileObject.filename,t=u(n);return void 0!==t&&"creator"===t}function f(e){return e&&"Folder"===e.__typename}},27722:function(e,n,t){e.exports=t(76155)},83907:function(e,n,t){e=t.nmd(e),function(t,r){"use strict";var o={};t.PubSub?(o=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=o,function(e){var n={},t=-1,r="*";function o(e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}function i(e){return function(){throw e}}function a(e,n,t){try{e(n,t)}catch(e){setTimeout(i(e),0)}}function s(e,n,t){e(n,t)}function l(e,t,r,o){var i,l=n[t],u=o?s:a;if(Object.prototype.hasOwnProperty.call(n,t))for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&u(l[i],e,r)}function u(e,n,t){return function(){var o=String(e),i=o.lastIndexOf(".");for(l(e,e,n,t);-1!==i;)i=(o=o.substr(0,i)).lastIndexOf("."),l(e,o,n,t);l(e,r,n,t)}}function c(e){var t=String(e);return Boolean(Object.prototype.hasOwnProperty.call(n,t)&&o(n[t]))}function d(e){for(var n=String(e),t=c(n)||c(r),o=n.lastIndexOf(".");!t&&-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),t=c(n);return t}function f(e,n,t,r){var o=u(e="symbol"==typeof e?e.toString():e,n,r);return!!d(e)&&(!0===t?o():setTimeout(o,0),!0)}e.publish=function(n,t){return f(n,t,!1,e.immediateExceptions)},e.publishSync=function(n,t){return f(n,t,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(n,e)||(n[e]={});var o="uid_"+String(++t);return n[e][o]=r,o},e.subscribeAll=function(n){return e.subscribe(r,n)},e.subscribeOnce=function(n,t){var r=e.subscribe(n,(function(){e.unsubscribe(r),t.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){n={}},e.clearSubscriptions=function(e){var t;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&delete n[t]},e.countSubscriptions=function(e){var t,r,o=0;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)){for(r in n[t])o++;break}return o},e.getSubscriptions=function(e){var t,r=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&r.push(t);return r},e.unsubscribe=function(t){var r,o,i,a=function(e){var t;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e))return!0;return!1},s="string"==typeof t&&(Object.prototype.hasOwnProperty.call(n,t)||a(t)),l=!s&&"string"==typeof t,u="function"==typeof t,c=!1;if(!s){for(r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(o=n[r],l&&o[t]){delete o[t],c=t;break}if(u)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===t&&(delete o[i],c=!0)}return c}e.clearSubscriptions(t)}}(o)),void 0!==e&&e.exports&&(n=e.exports=o),n.PubSub=o,e.exports=n=o}("object"==typeof window&&window||this)},34742:function(e,n,t){"use strict";t.d(n,{I:function(){return f},r:function(){return d}});var r=t(29901),o={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},i=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],a=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],s=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],l="undefined"!=typeof window&&void 0!==window.document?window.document:{},u="fullscreenEnabled"in l&&Object.keys(o)||i[0]in l&&i||a[0]in l&&a||s[0]in l&&s||[],c={requestFullscreen:function(e){return e[u[o.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[u[o.requestFullscreen]]},get exitFullscreen(){return l[u[o.exitFullscreen]].bind(l)},get fullscreenPseudoClass(){return":"+u[o.fullscreen]},addEventListener:function(e,n,t){return l.addEventListener(u[o[e]],n,t)},removeEventListener:function(e,n,t){return l.removeEventListener(u[o[e]],n,t)},get fullscreenEnabled(){return Boolean(l[u[o.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return l[u[o.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return l[("on"+u[o.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return l[("on"+u[o.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return l[("on"+u[o.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return l[("on"+u[o.fullscreenerror]).toLowerCase()]=e}};function d(){var e=(0,r.useState)(!1),n=e[0],t=e[1],o=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=function(){t(c.fullscreenElement===o.current)};return c.addEventListener("fullscreenchange",e),function(){return c.removeEventListener("fullscreenchange",e)}}),[]);var i=(0,r.useCallback)((function(){return c.fullscreenElement?c.exitFullscreen().then((function(){return c.requestFullscreen(o.current)})):o.current?c.requestFullscreen(o.current):void 0}),[]),a=(0,r.useCallback)((function(){return c.fullscreenElement===o.current?c.exitFullscreen():Promise.resolve()}),[]);return(0,r.useMemo)((function(){return{active:n,enter:i,exit:a,node:o}}),[n,i,a])}var f=function(e){var n=e.handle,t=e.onChange,o=e.children,i=e.className,a=[];return i&&a.push(i),a.push("fullscreen"),n.active&&a.push("fullscreen-enabled"),(0,r.useEffect)((function(){t&&t(n.active,n)}),[n.active]),r.createElement("div",{className:a.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0},o)}}}]);